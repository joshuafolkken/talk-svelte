pre-commit:
  parallel: true
  commands:
    prevent-main-commit:
      run: |
        current_branch=$(git rev-parse --abbrev-ref HEAD)
        if [ "$current_branch" = "main" ]; then
          echo "ðŸš« Error: Direct commits to main branch are not allowed"
          echo "   Please create a new branch and commit there:"
          echo "   git checkout -b feature/your-feature-name"
          exit 1
        else
          echo "âœ… Branch check passed: '$current_branch'"
        fi

    cspell:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte,html,css,scss,md,mdx,json,jsonc,yaml,yml}'
      run: npx cspell {staged_files}

    prettier:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte,html,css,scss,md,mdx,json,jsonc,yaml,yml}'
      run: npx prettier --check --ignore-unknown {staged_files}

    eslint:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte}'
      run: npx eslint --quiet {staged_files}

  fail_text: |
    ðŸš« Commit blocked due to quality checks failure
    Please fix the issues above and try again.

    Quick fixes:
    â€¢ Run `npm run format` to auto-format code
    â€¢ Run `npm run lint` to check and fix linting issues
    â€¢ Run `npm run check` to verify TypeScript types

pre-push:
  parallel: true
  commands:
    type-check:
      glob: '*.{svelte,ts,js,mjs,cjs}'
      run: npm run check

    test-unit:
      glob: '*.{svelte,ts,js,css}'
      run: npm run test:unit -- --run

    test-e2e:
      glob: '*.{svelte,ts,js,css,sql}'
      run: npm run test:e2e

  fail_text: |
    ðŸš« Push blocked due to build or test failures
    Please resolve the issues above before pushing.

    Troubleshooting:
    â€¢ Check build errors: `npm run build`
    â€¢ Run tests locally: `npm run test:unit` and `npm run test:e2e`
