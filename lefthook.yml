pre-commit:
  parallel: true
  commands:
    prevent-main-commit:
      skip: git diff --cached --quiet
      run: npm run prevent-main-commit

    cspell:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte,html,css,scss,md,mdx,json,jsonc,yaml,yml}'
      run: npx cspell {staged_files}

    prettier:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte,html,css,scss,md,mdx,json,jsonc,yaml,yml}'
      run: npx prettier --check --ignore-unknown {staged_files}

    eslint:
      glob: '*.{js,jsx,ts,tsx,mjs,cjs,svelte}'
      run: npx eslint --quiet {staged_files}

  fail_text: |
    ðŸš« Commit blocked due to quality checks failure
    Please fix the issues above and try again.

    Quick fixes:
    â€¢ Run `npm run format` to auto-format code
    â€¢ Run `npm run lint` to check and fix linting issues
    â€¢ Run `npm run check` to verify TypeScript types

commit-msg:
  commands:
    check-commit-message:
      run: npm run check-commit-message {1}

pre-push:
  parallel: true
  commands:
    type-check:
      glob: '*.{svelte,ts,js,mjs,cjs}'
      run: npm run check

    test-unit:
      glob: '*.{svelte,ts,js,css}'
      run: npm run test:unit -- --run

    test-e2e:
      glob: '*.{svelte,ts,js,css,sql}'
      run: npm run test:e2e

  fail_text: |
    ðŸš« Push blocked due to build or test failures
    Please resolve the issues above before pushing.

    Troubleshooting:
    â€¢ Check build errors: `npm run build`
    â€¢ Run tests locally: `npm run test:unit` and `npm run test:e2e`
